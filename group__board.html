<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>max: Chessboard</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">max
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('group__board.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Topics</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Chessboard</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Representation of the full state of an actual chess game. </p>
<p>These data structures are used by the engine search functions to actually search and evaluate a game tree. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__parse.html">PGN and FEN parsing</a></td></tr>
<tr class="memdesc:group__parse"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utilities to initialize a chess position from a FEN string. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__loc.html">Board Location Indices</a></td></tr>
<tr class="memdesc:group__loc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rank and file data stuffed into one byte using both the 0x88 and 6 bit LSF encoding schemes. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__move.html">Moves</a></td></tr>
<tr class="memdesc:group__move"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of moves on the chessboard, with packed and sparse representations available containing all information needed to make and unmake the move <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__movegen.html">Move Generation, Making, Unmaking</a></td></tr>
<tr class="memdesc:group__movegen"><td class="mdescLeft">&#160;</td><td class="mdescRight">Functions to generate and validate moves on a board, as well as making/unmaking those moves <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__piececode.html">Piece Codes</a></td></tr>
<tr class="memdesc:group__piececode"><td class="mdescLeft">&#160;</td><td class="mdescRight">Piece codes form one half of the actual chessboard - storing piece type and color by square. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__piecelist.html">Piece Lists</a></td></tr>
<tr class="memdesc:group__piecelist"><td class="mdescLeft">&#160;</td><td class="mdescRight">Piece lists store the board location of each piece on the chessboard. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__state.html">Game State</a></td></tr>
<tr class="memdesc:group__state"><td class="mdescLeft">&#160;</td><td class="mdescRight">Additional irreversible aspects of a chess game that must be maintained in order to make and unmake moves. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zobrist.html">Zobrist Keys</a></td></tr>
<tr class="memdesc:group__zobrist"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zobrist hashing builds unique identifiers for chess positions, to be used in a transposition table and to efficiently store and compare positions when determining draws by threefold repetition. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fba99507b775c66bb74b7d2ba2d5369" id="r_ga9fba99507b775c66bb74b7d2ba2d5369"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9fba99507b775c66bb74b7d2ba2d5369">max_side_t</a></td></tr>
<tr class="memdesc:ga9fba99507b775c66bb74b7d2ba2d5369"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple typedef over a single byte for an index used to identify one of the players.  <br /></td></tr>
<tr class="separator:ga9fba99507b775c66bb74b7d2ba2d5369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e0954e70a7160b6a211a959e9d37a37" id="r_ga9e0954e70a7160b6a211a959e9d37a37"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga9e0954e70a7160b6a211a959e9d37a37">max_board_perft</a> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board, <a class="el" href="structmax__movelist__t.html">max_movelist_t</a> moves, uint8_t depth)</td></tr>
<tr class="memdesc:ga9e0954e70a7160b6a211a959e9d37a37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a perft test up to the given depth.  <br /></td></tr>
<tr class="separator:ga9e0954e70a7160b6a211a959e9d37a37"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmax__board__t.html">max_board_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chessboard representation based on the architecture proposed in 'New Architectures in Computer Chess' [1] by Fritz Reul.  <a href="structmax__board__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8bdb61705fe0f15b59cc241bd41871ca" id="r_ga8bdb61705fe0f15b59cc241bd41871ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga8bdb61705fe0f15b59cc241bd41871ca">max_board_new</a> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board, <a class="el" href="structmax__state__t.html">max_state_t</a> *buffer, uint64_t seed)</td></tr>
<tr class="memdesc:ga8bdb61705fe0f15b59cc241bd41871ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new chessboard with no pieces on the board and a default state (both sides able to castle, en passant is not available).  <br /></td></tr>
<tr class="separator:ga8bdb61705fe0f15b59cc241bd41871ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07d0f0805fbcca30aaf4ac1388e1f8f1" id="r_ga07d0f0805fbcca30aaf4ac1388e1f8f1"><td class="memItemLeft" align="right" valign="top"><a id="ga07d0f0805fbcca30aaf4ac1388e1f8f1" name="ga07d0f0805fbcca30aaf4ac1388e1f8f1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>max_board_reset</b> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board)</td></tr>
<tr class="memdesc:ga07d0f0805fbcca30aaf4ac1388e1f8f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the given chessboard, removing any pieces and resetting the capture and state stacks. <br /></td></tr>
<tr class="separator:ga07d0f0805fbcca30aaf4ac1388e1f8f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea811bf436610e208306b598b83420b2" id="r_gaea811bf436610e208306b598b83420b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea811bf436610e208306b598b83420b2">max_board_default_pos</a> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board)</td></tr>
<tr class="memdesc:gaea811bf436610e208306b598b83420b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the given board, then add pieces in their default positions.  <br /></td></tr>
<tr class="separator:gaea811bf436610e208306b598b83420b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga108bc718390cca32aedbbf4150706a86" id="r_ga108bc718390cca32aedbbf4150706a86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="def_8h.html#a78136be6928a8db00fe2cb7e2ed58009">MAX_INLINE_ALWAYS</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga108bc718390cca32aedbbf4150706a86">max_board_threefold</a> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board)</td></tr>
<tr class="memdesc:ga108bc718390cca32aedbbf4150706a86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the given board has drawn by threefold repetition.  <br /></td></tr>
<tr class="separator:ga108bc718390cca32aedbbf4150706a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4532a723fc66ec9ad28dc41104341f1" id="r_gab4532a723fc66ec9ad28dc41104341f1"><td class="memItemLeft" align="right" valign="top"><a id="gab4532a723fc66ec9ad28dc41104341f1" name="gab4532a723fc66ec9ad28dc41104341f1"></a>
<a class="el" href="def_8h.html#a78136be6928a8db00fe2cb7e2ed58009">MAX_INLINE_ALWAYS</a> <a class="el" href="#ga9fba99507b775c66bb74b7d2ba2d5369">max_side_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>max_board_side</b> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board)</td></tr>
<tr class="memdesc:gab4532a723fc66ec9ad28dc41104341f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a side flag for the current side to play on the board's ply. <br /></td></tr>
<tr class="separator:gab4532a723fc66ec9ad28dc41104341f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15498ba3a71f6e88ec229d98571b51ae" id="r_ga15498ba3a71f6e88ec229d98571b51ae"><td class="memItemLeft" align="right" valign="top"><a id="ga15498ba3a71f6e88ec229d98571b51ae" name="ga15498ba3a71f6e88ec229d98571b51ae"></a>
<a class="el" href="def_8h.html#a78136be6928a8db00fe2cb7e2ed58009">MAX_INLINE_ALWAYS</a> <a class="el" href="#ga9fba99507b775c66bb74b7d2ba2d5369">max_side_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>max_board_enemy_side</b> (<a class="el" href="structmax__board__t.html">max_board_t</a> *board)</td></tr>
<tr class="memdesc:ga15498ba3a71f6e88ec229d98571b51ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a side flag for the enemy to the current side to play on the board's ply. <br /></td></tr>
<tr class="separator:ga15498ba3a71f6e88ec229d98571b51ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga9fba99507b775c66bb74b7d2ba2d5369" name="ga9fba99507b775c66bb74b7d2ba2d5369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9fba99507b775c66bb74b7d2ba2d5369">&#9670;&#160;</a></span>max_side_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="#ga9fba99507b775c66bb74b7d2ba2d5369">max_side_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simple typedef over a single byte for an index used to identify one of the players. </p>
<p>During nearly all phases of engine search, we use this index to grab side-specific data from an array with two elements - avoiding a branch.</p>
<div class="fragment"><div class="line">White = 0</div>
<div class="line">Black = 1</div>
</div><!-- fragment --><p> These specific numbers are chosen because we can very efficiently map a ply counter to a side index by bitwise ANDing with 1. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaea811bf436610e208306b598b83420b2" name="gaea811bf436610e208306b598b83420b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea811bf436610e208306b598b83420b2">&#9670;&#160;</a></span>max_board_default_pos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void max_board_default_pos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmax__board__t.html">max_board_t</a> *</td>          <td class="paramname"><span class="paramname"><em>board</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the given board, then add pieces in their default positions. </p>
<p>This effectively begins a new game on the board, clearing all prior state. </p>

</div>
</div>
<a id="ga8bdb61705fe0f15b59cc241bd41871ca" name="ga8bdb61705fe0f15b59cc241bd41871ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8bdb61705fe0f15b59cc241bd41871ca">&#9670;&#160;</a></span>max_board_new()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void max_board_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmax__board__t.html">max_board_t</a> *</td>          <td class="paramname"><span class="paramname"><em>board</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmax__state__t.html">max_state_t</a> *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>seed</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new chessboard with no pieces on the board and a default state (both sides able to castle, en passant is not available). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">board</td><td>A pointer to an uninitialized board structure that will be initialized </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>A pointer to the buffer that will be used to maintain the state stack of the board </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">seed</td><td>Seed to use for the random number generator when creating zobrist elements </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9e0954e70a7160b6a211a959e9d37a37" name="ga9e0954e70a7160b6a211a959e9d37a37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e0954e70a7160b6a211a959e9d37a37">&#9670;&#160;</a></span>max_board_perft()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t max_board_perft </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmax__board__t.html">max_board_t</a> *</td>          <td class="paramname"><span class="paramname"><em>board</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structmax__movelist__t.html">max_movelist_t</a></td>          <td class="paramname"><span class="paramname"><em>moves</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>depth</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a perft test up to the given depth. </p>
<p>During this test, all moves for the side to play will be played, then all moves for the other side until the desired depth has been reached. Then, all valid position nodes arising from these moves are counted and returned, to be used for verifying move generation and validation. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">depth</td><td>The desired perft recursion depth </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga108bc718390cca32aedbbf4150706a86" name="ga108bc718390cca32aedbbf4150706a86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga108bc718390cca32aedbbf4150706a86">&#9670;&#160;</a></span>max_board_threefold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="def_8h.html#a78136be6928a8db00fe2cb7e2ed58009">MAX_INLINE_ALWAYS</a> bool max_board_threefold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmax__board__t.html">max_board_t</a> *</td>          <td class="paramname"><span class="paramname"><em>board</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the given board has drawn by threefold repetition. </p>
<p>Note that the state stack must have at least three elements in order to compare past positions. </p><dl class="section return"><dt>Returns</dt><dd>true if a position has been repeated three times </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
